<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="layui/layui.js"></script>
    <script src="js/jquery-1.11.0.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/ajaxUtil.js"></script>
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css"/>
    <title></title>
</head>


<body>




<div class="layui-row">
    <div class="layui-col-md2">
        <div class="grid-demo grid-demo-bg1">
<!--            <ul class="layui-nav layui-nav-tree" lay-filter="test">-->
            <div>
<!--                <p style="float: left">超好看的网站</p>-->
                侧边导: <ul class="layui-nav layui-nav-tree layui-nav-side">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="javascript:;">我是主页</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">我是分支</a></dd>
                        <dd><a href="javascript:;">我也是分支</a></dd>
                        <dd><a href="">我还是分支</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;">地图模式</a>
                    <dl class="layui-nav-child">
                        <dd><a href="">移动模块</a></dd>
                        <dd><a href="">后台模版</a></dd>
                        <dd><a href="">电商平台</a></dd>
                    </dl>
                </li>
                <!--            <li class="layui-nav-item"><a href="">产品</a></li>-->
                <li class="layui-nav-item"><a href="">关于我们</a></li>
            </ul>
            </div>
           </div>
    </div>
    <div class="layui-col-md10" >
        <div id="elem" class="grid-demo" >

            <!--上方框-->
            <div class="layui-card "  style="padding: 10px; background-color: #393D49; border-radius: 10px;">

                <!--<div class="layui-card-body layui-bg-cyan " style="border-radius: 10px;" >-->

                <div class="layui-row layui-col-space15" >
                    <div class="layui-col-md1  ">
                        <div class="grid-demo grid-demo-bg1 layui-col-lg-offset4  ">
                            <i class="layui-icon layui-icon-time" style="font-size: 30px; color: #F0F0F0;"></i>
                        </div>
                    </div>
                    <div class="layui-col-md11 ">
                        <div class="grid-demo">


                            <div class="layui-row">
                                <div class="layui-col-md4">
                                    <div class="grid-demo grid-demo-bg1">


                                        <form class="layui-form" action="">
                                            <div class="layui-inline">
                                                <div class="layui-input-inline" style="width: 40%;">
                                                    <select name="way" lay-verify="required" lay-search="">
                                                        <option value="">往返</option>
                                                        <option value="1">layer</option>
                                                        <option value="2">form</option>
                                                        <option value="3">layim</option>

                                                    </select>
                                                </div>
                                                <div class="layui-input-inline" style="width: 40%;">
                                                    <select name="kind" lay-verify="required" lay-search="">
                                                        <option value="">1成人经济舱</option>
                                                        <option value="1">layer</option>
                                                        <option value="2">form</option>
                                                        <option value="3">layim</option>

                                                    </select>
                                                </div>
                                            </div>

                                        </form>


                                    </div>
                                </div>

                                <div class="layui-col-md4">
                                    <div class="grid-demo">
                                        <form class="layui-form" action="">
                                            <div class="layui-inline">
                                                <div id="departure" class="layui-input-inline" style="width: 40%;">
                                                    <select id="goto" name="goto" lay-verify="required" lay-search="">
                                                        <option value="">出发地</option>
<!--                                                        <option value="1">123</option>-->
<!--                                                        <option value="2">form</option>-->
<!--                                                        <option value="3">layim</option>-->

                                                    </select>
                                                </div>
                                                <button type="button" class="layui-btn layui-btn-sm">交换</button>
                                                <div id="arrival" class="layui-input-inline" style="width: 40%;">
                                                    <select id="aim" name="aim" lay-verify="required" lay-search="">
                                                        <option value="">目的地</option>
<!--                                                        <option value="1">layer</option>-->
<!--                                                        <option value="2">form</option>-->
<!--                                                        <option value="3">layim</option>-->

                                                    </select>
                                                </div>
                                            </div>





                                        </form>
                                    </div>

                                </div>


                                <div class="layui-col-md4">
                                    <div class="grid-demo grid-demo-bg1">

                                        <div class="layui-inline">
                                            <div class="layui-input-inline ">
                                                <input  type="text" class="layui-input" id="test1" placeholder="yyyy-MM-dd">
                                            </div>
                                            <button type="button" class="layui-btn" @click = "getInfo()"><i class="layui-icon layui-icon-search" ></i>搜索</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <!--</div>-->

            </div>
            <!--显示卡片-->


            <div class="card" style="padding: 20px; " id="card">
                <div class="layui-progress">
                    <div class="layui-progress-bar layui-bg-blue" lay-percent="50%"></div>
                </div>
                <div class="layui-card" v-for="card in cards">

                    <div class="layui-card-header">
                        当日最低价
                       <span> {{card.airlineName}}</span>
                    </div>
                    <!--青色分割线-->
                    <hr class="layui-bg-cyan">

                    <div class="layui-card-body layui-bg-cyan">
                        <div class="layui-row layui-col-space10 ">
                            <div class="layui-col-md2 ">

                            </div>
                            <div class="layui-col-md6">
                                <div class="layui-row layui-col-space10" style="word-wrap: break-word; word-break: normal;">
                                    <div class="layui-col-md4 " style=" text-align: left;">
                                        <h5 style="text-align: left;">{{card.departureTime}}</h5>
                                        <h4 style="text-align: left;">{{card.departureAirportName}}{{card.departureAirportTerminal}}</h4>
                                    </div>
                                    <div class="layui-col-md4">
                                        <hr class="layui-bg-orange">
<!--                                        <div class="item-text layui-inline" ><h6 style="text-align: center;">{{card.transit}}</h6></div>-->

                                    </div>
                                    <div class="layui-col-md4" style="text-align: right;">

                                        <h5 style="text-align: right;">{{card.arrivalTime}}</h5>
                                        <h4 style="text-align: right;">{{card.arrivalAirportName}}{{card.arrivalAirportTerminal}}</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-col-md4 "  style="text-align: center;">
                                <i class="layui-icon">&#xe68d;</i>  <span>{{card.triptime}}</span>


                            </div>
                        </div>

                    </div>
                    <div class="layui-card-body layui-bg-green">
                        <div class="layui-row ">
                            <div class="layui-col-md9">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-primary">航程详情</button>
                            </div>
                            <div class="layui-col-md3">
                                <span>含税总价：￥{{card.price}}</span>
                                <button type="button" class="layui-bg-cyan layui-btn layui-btn-sm layui-btn-radius">选择去程</button>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
<style type="text/css">
    body{
        background-image: url("pic/cloud.png");
    }
    .card{
        width: 60%;
        margin-left: 20%;
    }
    .mid{
        margin: auto;
    }
</style>
<script>
    $.ajax({
        type:'GET',
        url:'/Ticket/getdeparture',
        success:function(data){
            for (var i = 0;i < data.length;i++) {
                $("#goto").append("<option value="+i+">"+data[i]+"</option>")
            }
            layui.form.render("select");
            // let labArr = data[0].region;
            // selectRender(labArr); // 在success 里面调用该事件
        },
        error:function() {
            alert("数据加载失败！");
        }
    });
    $.ajax({
        type:'GET',
        url:'/Ticket/getArrival',
        success:function(data){
            for (var i = 0;i < data.length;i++) {

                $("#aim").append("<option value="+i+">"+data[i]+"</option>")
            }
            layui.form.render("select");
            // let labArr = data[0].region;
            // selectRender(labArr); // 在success 里面调用该事件
        },
        error:function() {
            alert("数据加载失败！");
        }
    });



    var v1 = new Vue({
        el:'#elem',
        data: {
            cards: []
        },
        // mounted() {
        //     // this.getInfo();
        // },
        methods:{
            getInfo(){
                var depatureCityName_select = document.getElementById("goto");
                var arrivalCityName_select = document.getElementById("aim");
                var depatureCityName = depatureCityName_select.options[depatureCityName_select.selectedIndex].text;
                var arrivalCityName = arrivalCityName_select.options[arrivalCityName_select.selectedIndex].text;
                var departureDate = $("#test1").val();
                // alert(departureDate);
                // alert(depatureCityName);
                // alert(arrivalCityName);
                ajax({
                    method: HTTP_METHOD.GET,
                    url: "/Ticket/getTicket?depatureCityName="+depatureCityName+"&arrivalCityName="+arrivalCityName+"&departureDate="+departureDate,
                    async: true,
                    type: HTTP_RESPONSE_TYPE.JSON,
                    callback: (datas) => { // 这里错了 你这里下面的 this 是 这个 ajax( 里面这个对象表示的 this ，JS 的this 初学者很容易犯错)
                        alert(datas[0].airlineName);
                        this.cards = datas;
                    }
                })
            }
        }

    });


    //注意进度条依赖 element 模块，否则无法进行正常渲染和功能性操作
    layui.use('element', function(){
        var element = layui.element;
    });
    layui.use('laydate', function(){
        var laydate = layui.laydate;

        //常规用法
        laydate.render({
            elem: '#test1'
        });

    });
    layui.use(['form', 'layedit'], function(){
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit;
        //创建一个编辑器
        var editIndex = layedit.build('LAY_demo_editor');

        //监听提交
        form.on('submit(formDemo)', function(data){
            layer.msg(JSON.stringify(data.field));
            return false;
        });
//表单取值
        layui.$('#LAY-component-form-getval').on('click', function(){
            var data = form.val('example');
            alert(JSON.stringify(data));
        });
        //自定义验证规则
        form.verify({
            title: function(value){
                if(value.length < 5){
                    return '标题至少得5个字符啊';
                }
            }
            ,pass: [
                /^[\S]{6,12}$/
                ,'密码必须6到12位，且不能出现空格'
            ]
            ,content: function(value){
                layedit.sync(editIndex);
            }
        });
        //监听指定开关
        form.on('switch(switchTest)', function(data){
            layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
                offset: '6px'
            });
            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
        });
        form.render();
    });




</script>
</html>
